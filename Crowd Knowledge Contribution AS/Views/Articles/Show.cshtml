@model Crowd_Knowledge_Contribution.Models.Article

@{
    /**/

    ViewBag.Title = "Show";
}

<div class="panel panel-default">

    @Html.Partial("ArticleInfo", Model)

    <div class="panel-footer">
        @if ((Model.User.UserName == System.Web.HttpContext.Current.User.Identity.Name && User.IsInRole("Editor")) || User.IsInRole("Admin"))
        {
            if (!Model.BaiatRau || User.IsInRole("Admin"))
            {
                <a class="btn btn-success pull-left" href="/Articles/Edit/@Model.ArticleId">Modifica articol</a>
            }
            if (User.IsInRole("Admin"))
            {
                using (Html.BeginForm(actionName: "Restrict", controllerName: "Articles", method: FormMethod.Post, routeValues: new { id = @Model.ArticleId }))
                {
                    @Html.HttpMethodOverride(HttpVerbs.Put)
                    if (!Model.BaiatRau)
                    {
                        <button class="btn btn-danger pull-right" type="submit">Restrictionare acces editare</button>
                    }
                    else
                    {
                        <button class="btn btn-success pull-right" type="submit">Redare acces editare</button>
                    }
                }
            }
            if (!Model.BaiatRau || User.IsInRole("Admin"))
            {
                using (Html.BeginForm(actionName: "Delete", controllerName: "Articles", method: FormMethod.Post, routeValues: new { id = @Model.ArticleId }))
                {
                @Html.HttpMethodOverride(HttpVerbs.Delete)
                <button class="btn btn-danger pull-right" type="submit">Sterge articol</button>
                }
            }
        }

        <div class="clearfix"></div>
    </div>

</div>


<br />
@foreach (var chapter in Model.Chapters)
{
    <div class="container">
        <div class="row">
            <a href="/Chapters/Show/@chapter.ChapterId" style="text-decoration:none">@chapter.ChapterTitle</a>
        </div>
    </div>
    <br />
}

<hr />
<a href="/Articles/Index">Inapoi la lista articolelor</a>
<br />

@if ((Model.User.UserName == System.Web.HttpContext.Current.User.Identity.Name && User.IsInRole("Editor")) || User.IsInRole("Admin"))
{
    <a href="/Articles/New">Adauga alt articol</a>
    <br />
    <a href="/Chapters/New/@Model.ArticleId">Adauga alt capitol</a>
    <br />
    <a href="/Modifications/IndexArticle/@Model.ArticleId">Afisati modificarile</a>
    <br />
}